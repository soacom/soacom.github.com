---
layout: page
title: Domains
description: Site configuration tasks&#8212;Configure authentication domains for APIs defined in the platform.
product: cm
category: learn
subcategory: Site Administration
weight: 20
type: page
nav-title: 
no-nav: true
no-catalog: true
---
<h2 id="top">Domains</h2>
<p>Configure domains that can be used for login or as authentication domains for APIs defined in the platform.</p>
<div class = "divider1"></div>


<h3 style="color: gray;">Table of Contents</h3>


<h5 style="color: gray;"><a href="#h_managing_domains">Managing Domains</a></h5>


<ol class="table_of_contents">
  <li><a href="#what_domain_types_are_supported">What domain types are supported on the platform?</a></li>
  <li><a href="#how_do_i_add_a_domain">How do I add a domain?</a></li>
  <li><a href="#how_do_i_modify_a_domain">How do I modify a domain?</a></li>
  <li><a href="#how_do_i_delete_a_domain">How do I delete a domain?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_login_domains">Login Domains</a></h5>


<ol class="table_of_contents">
  <li><a href="#how_do_i_set_up_a_login_domain">How do I set up a login domain?</a></li>
  <li><a href="#how_do_i_configure_a_platform_login_default_domain">How do I configure a Platform Login domain?</a></li>
  <li><a href="#how_do_i_set_up_an_ldap_domain">How do I set up an LDAP domain?</a></li>
  <li><a href="#domains_login_setup_facebook">How do I set up the platform to log in with Facebook (Facebook Connector domain)?</a></li>
  <li><a href="#domains_login_setup_ca_siteminder">How do I set up the platform to log in with CA SiteMinder (CA SiteMinder domain)?</a></li>
  <li><a href="#how_do_i_get_google_credentials_for_a_google_connector_domain">How do I get Google credentials for a Google Connector domain?</a></li>
  <li><a href="#how_do_i_set_up_a_google_connector_domain">How do I set up a Google Connector domain?</a></li>
  <li><a href="#domains_login_setup_google">How do I set up the platform to log in with Google (Google Connector domain)?</a></li>
  <li><a href="#what_value_should_i_use_for_the_redirect_uri_for_my_google_connector_domain">What value should I use for the Redirect URI for my Google Connector domain?</a></li>
  <li><a href="#domain_setup_openid_relying_party">How do I set up the platform to log in with an OpenID Relying Party domain (legacy)?</a></li>
</ol>


<h5 style="color: gray;"><a href="#h_api_authentication_domains">API Authentication Domains</a></h5>


<ol class="table_of_contents">
  <li><a href="#how_does_the_authentication_provider_configuration_process_work">How does the authentication provider configuration process work?</a></li>
  <li><a href="#how_do_i_set_up_a_platform_deployment_to_support_a_third_party_provider">How do I set up a platform deployment to support a third-party provider?</a></li>
  <li><a href="#how_do_i_set_up_and_configure_an_oauth_provider_domain">How do I set up and configure an OAuth Provider domain?</a></li>
  <li><a href="#what_is_an_authorization_server_url">What is an Authorization Server URL?</a></li>
  <li><a href="#what_is_the_authorization_server_url_for_the_platform">What is the OAuth Authorization Server URL for the platform?</a></li>
  <li><a href="#how_do_i_set_up_an_my_deployment_to_support_openid">How do I set up my deployment to support OpenID?</a></li>
  <li><a href="#how_do_i_configure_an_openid_relying_party_domain">How do I configure an OpenID Relying Party domain?</a></li>
  <li><a href="#how_do_i_configure_access_permissions_for_openid">How do I configure access permissions for OpenID?</a></li>
  <li><a href="#how_do_i_configure_a_pingfederate_domain">How do I configure a PingFederate domain?</a></li>
  <li><a href="#how_do_i_customize_google_user_consent_screen">How do I customize the Google user consent screen for my Google Connector domain?</a></li>
</ol>



<div class = "divider1"></div>



<h3><a name="h_managing_domains">Managing Domains</h3>



<a name="what_domain_types_are_supported"></a><h3>What domain types are supported on the platform?</h3>
<p>The security domains configured on the platform can be used in multiple contexts, including:</p>
<ul>
  <li>Login domain, for logging in to the portal</li>
  <li>Resource owner domain, for OAuth resource owners</li>
  <li>App authentication in API runtime, for sending API requests</li>
</ul>
<p>One domain can be used for multiple purposes, or separate domains can be configured for separate purposes.</p>
<p>When a specific domain is configured for the purpose of developer logins to the portal, it is called a <strong>login domain</strong>. </p>
<p>The following domains are supported:</p>
<ul>
  <li><a href="#how_do_i_configure_a_platform_login_default_domain">Platform Login</a> (no setup required but must be enabled)</li>
  <li><a href="#how_do_i_set_up_a_google_connector_domain">Google® Connector</a></li>
  <li><a href="#how_do_i_configure_a_pingfederate_domain">PingFederate&reg; Provider</a></li>
  <li><a href="#domains_login_setup_facebook">Facebook® Connector</a></li>
  <li><a href="#how_do_i_set_up_an_ldap_domain">LDAP</a></li>
  <li><a href="#domains_login_setup_ca_siteminder">CA SiteMinder®</a></li>
  <li><a href="#how_do_i_set_up_and_configure_an_oauth_provider_domain">OAuth Provider</a></li>
  <li><a href="#how_do_i_configure_an_openid_relying_party_domain">OpenID Relying Party</a></li>
</ul>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_add_a_domain"></a><h3>How do I add a domain?</h3>
<h5>To add a domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>On the right, click <strong>Add Domain</strong>.</li>
  <li>Choose from the supported domain types, and then follow the applicable setup instructions:
    <ul>
      <li><a href="#how_do_i_set_up_a_google_connector_domain">Google Connector</a></li>
      <li><a href="#how_do_i_configure_a_pingfederate_domain">PingFederate Provider</a></li>
      <li><a href="#configure_domain_facebook">Facebook Connector</a></li>
      <li><a href="#how_do_i_set_up_an_ldap_domain">LDAP</a></li>
      <li><a href="#domains_login_setup_ca_siteminder">CA SiteMinder</a></li>
      <li><a href="#to_configure_domain_oauth_provider">OAuth Provider</a></li>
      <li><a href="#how_do_i_configure_an_openid_relying_party_domain">OpenID Relying Party</a></li>
    </ul></li>
  <li>When the domain is set up, if you want to offer it for login you must enable it as a separate configuration step. See <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a> (Configuration section).</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_modify_a_domain"></a><h3>How do I modify a domain?</h3>
<h5>To modify a domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Find the domain on the list and click <strong>Modify</strong>. The <em>Edit</em> wizard for the specific domain type displays.</li>
  <li>Follow the setup instructions for the specific domain type (editing is similar to adding, although some fields, such as the domain name, cannot be changed):
    <ul>
      <li><a href="#how_do_i_set_up_a_google_connector_domain">Google Connector</a></li>
      <li><a href="#how_do_i_configure_a_pingfederate_domain">PingFederate Provider</a></li>
      <li><a href="#configure_domain_facebook">Facebook Connector</a></li>
      <li><a href="#how_do_i_set_up_an_ldap_domain">LDAP</a></li>
      <li><a href="#domains_login_setup_ca_siteminder">CA SiteMinder</a></li>
      <li><a href="#to_configure_domain_oauth_provider">OAuth Provider</a></li>
      <li><a href="#how_do_i_configure_an_openid_relying_party_domain">OpenID Relying Party</a></li>
    </ul>
  </li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_delete_a_domain"></a><h3>How do I delete a domain?</h3>
<h5>To delete a domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>In the right-hand column of the domain line item, click <strong>Delete</strong>. At the confirmation message, click <strong>OK</strong>.</li>
  </ol>
<p><strong>Note</strong>: Rather than deleting a domain, you might choose to disable the domain for login, in the Config options. For instructions, see <a href="site_admin_config.htm#how_do_i_disable_a_platform_login">How do I disable a platform login?</a></p>
<p><a href="#top">Back to top</a></p>



<hr />



<h3><a name="h_login_domains">Login Domains</h3>



<a name="how_do_i_set_up_a_login_domain"></a><h3>How do I set up a login domain?</h3>
<p>To make a login domain available to users for logging in to the platform, you must perform two steps:</p>
<ol>
  <li>Configure the applicable domain: <em>Administration &gt; Domains &gt; Add Domain</em>. Domains applicable to login are:
    <ul>
      <li>Platform Login: see <a href="#how_do_i_configure_a_platform_login_default_domain">How do I configure a Platform Login domain?</a></li>
      <li>LDAP: see <a href="#how_do_i_set_up_an_ldap_domain">How do I configure an LDAP domain?</a></li>
      <li>Google Connector: see <a href="#how_do_i_set_up_a_google_connector_domain">How do I configure a Google Connector domain?</a></li>
      <li>Facebook Connector: see <a href="#domains_login_setup_facebook">How do I configure a Facebook Connector domain?</a></li>
      <li>CA SiteMinder: see <a href="#domains_login_setup_ca_siteminder">How do I set up the platform to log in with CA SiteMinder (CA SiteMinder domain)?</a></li>
      <li>OpenID Relying Party (no longer supported by Google for new installations, use <a href="#how_do_i_set_up_a_google_connector_domain">Google Connector</a> instead): see <a href="#how_do_i_configure_an_openid_relying_party_domain">How do I configure an OpenID Relying Party domain?</a></li>
    </ul>
    </li>
  
  <li>Enable the domain for login. This is a configuration step: <strong>Administration</strong><em> &gt; </em><strong>Config</strong><em> &gt; </em><strong>Logins</strong> page (<strong>Enable</strong> checkbox). For more information, see <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a></li>
</ol>
<p>Once these two steps are complete, the login options you've configured and enabled are available for anyone logging in to the platform.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_configure_a_platform_login_default_domain"></a>
<h3>How do I configure a Platform Login  domain?</h3>
<p>Installation of the platform automatically creates a Platform Login domain. This login domain type allows users who have signed up on the platform to log in via the default platform login page using their email and password login credentials.</p>
<p>Although the Platform Login domain is created automatically, it must still be enabled for login by the Site Admin. This is a configuration step: <strong>Administration</strong><em> &gt; </em><strong>Config</strong><em> &gt; </em><strong>Logins</strong> page (<strong>Enable</strong> checkbox). For more information, see <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a></p>
<p>The default Platform Login domain cannot be deleted.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_an_ldap_domain"></a>
<h3>How do I set up an LDAP domain?</h3>
<p> The platform provides support for users logging in using LDAP credentials. </p>
<p>You must first define the LDAP domain via the <em>Configure &gt; Security &gt; Identity Systems</em> section of the <a href="basics_glossary.htm#gl_policy_manager">Policy Manager</a> Management Console. For more information, refer to the <strong>Add Identity System</strong> (Active Directory) topic in the Policy Manager Online Help.</p>
<p>Once the domain is defined in Policy Manager, you can configure it in Community Manager and enable it for login.</p>
<p>Once setup is complete, when users sign in they will see the LDAP icon on the platform login page and will be able to choose LDAP for login.</p>
<a name="configure_login_ldap"></a>
<h5>To set up an LDAP login domain in Community Manager:</h5>
<ol>
  <li>Define the LDAP domain in the <em>Configure &gt; Security &gt; Identity Systems </em>section of Policy Manager. See notes above.</li>
  
  <li>In the platform, log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Navigate to the <em>Administration &gt; Config &gt; Logins</em> page. The <em>Configure</em> screen displays and the LDAP domain you added in Policy Manager will show up in the listing.</li>
  <li>To enable the LDAP domain, click the <strong>Enable</strong> checkbox.</li>
  <li>If desired, configure additional domain settings: <a href="site_admin_config.htm#what_is_a_target_host">Target Host</a>, <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">Logo/Avatar</a>, and <a href="site_admin_config.htm#what_login_page_integration_modes_are_supported">Mode</a>. For more information, see <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a></li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="domains_login_setup_facebook"></a>
<h3>How do I set up the platform to log in with Facebook (Facebook Connector domain)?</h3>
<p>The Facebook <a href="basics_glossary.htm#gl_connectordomain">Connector domain</a> allows users to log into the platform using Facebook credentials. Essentially, the Site Admin registers the platform with Facebook as a Facebook app, and then uses the values provided by Facebook for App ID and App Secret to set up the Facebook Connector domain.</p>
<p>Once this is set up, the Facebook icon appears during signup and users can log in using Facebook credentials.</p>
<p><strong>Note</strong>: For certain activities, such as creating an API or using the platform API, users must complete the standard platform signup process. Logging in with Facebook is not adequate for these activities.</p>
<p>Before setting up the domain in the platform, you'll need to register the platform as an app on the Facebook developer site at <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a> and get the Facebook App ID and Shared Secret values for your instance of the platform.</p>
<p>Once the domain is set up, the last step is to enable it in the <strong>Administration</strong> &gt; <strong>Config</strong> &gt; <strong>Logins</strong><em></em> page.</p>
<p>Once setup is complete, when users sign in they will see the Facebook icon on the platform login page and be able to choose Facebook for login.</p>
<h5><a name="configure_domain_facebook"></a>To set up a Facebook Connector domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong>. The <strong>Select Domain Type</strong> drop-down menu displays.</li>
  <li>Select <strong>Facebook Connector</strong> and click <strong>Select</strong>. The <em>Add Connector Domain</em> wizard opens at the Details page.</li>
  <li>Specify values for Name and Description and then click <strong>Next</strong>.</li>
  <li>For App ID and App Secret, provide the values that were assigned by Facebook when you registered your instance of the platform as an app at <a href="https://developers.facebook.com/apps" target="_blank">https://developers.facebook.com/apps</a>.</li>
  <li>Click <strong>Save</strong>.</li>
  <li>When the domain is set up, you must enable it on the <strong>Administration</strong> &gt; <strong>Config</strong> &gt; <strong>Logins</strong> page. See below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="enable_domain_facebook"></a>
<h5>To enable and configure a Facebook login domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Create the domain, following the instructions above.</li>
  <li>Click <strong>Administration</strong> &gt; <strong>Config</strong> &gt; <strong>Logins</strong>.</li>
  <li>Check the <strong>Enable</strong> checkbox.</li>
  <li>If you would like to configure a virtual host for the domain, enter it in the &quot;Target Host&quot; text box. For more information, see <a href="site_admin_config.htm#what_is_a_target_host">What is a Target Host?</a> below.</li>
  <li>In the Logo/Avatar column, click <strong>Upload</strong> and select the logo you would like to display for the Login button. for more information, see <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">How do I upload and crop icons?</a>  You can upload your own custom button or refer to the following page for information on Facebook login button usage: <a href="https://www.facebookbrand.com" target="_blank">https://www.facebookbrand.com</a>.</li>
  <li>In the Mode column, click the applicable button to indicate whether you want the Facebook login to be a popup or to display in the main window. For more information, see <a href="site_admin_config.htm#what_login_page_integration_modes_are_supported">What login page integration modes are supported?</a></li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="domains_login_setup_ca_siteminder"></a>
<h3>How do I set up the platform to log in with CA SiteMinder (CA SiteMinder domain)?</h3>
<p>The CA SiteMinder domain allows users to log into the platform using <a href="basics_glossary.htm#gl_casiteminder">CA SiteMinder</a> credentials.</p>
<p>You must first define the CA SiteMinder domain via the <em>Configure &gt; Security &gt; Identity Systems</em> section of the <a href="basics_glossary.htm#gl_policy_manager">Policy Manager</a> Management Console. For more information, refer to the following external documentation:</p>
<ul>
  <li>The <strong>Add Identity System</strong> (Active Directory) topic in the Policy Manager Online Help.</li>
  <li>The <em>Integrating CA SiteMinder with Policy Manager 6.1 Guide </em>available via the SOA Software Support Site (support.soa.com &gt; Downloads &gt; PolicyManager &gt; PM61 &gt; PM61_CASiteMinder_Integration.pdf). This has instructions on how to set up CA SiteMinder and install the identity system (domain) in Policy Manager.</li>
  <li>The <em>Enterprise API Platform Installation Guide</em> (for information on how to install a CA SiteMinder Identity System).</li>
</ul>
<p>Once the domain is defined in Policy Manager, you can configure and enable it in Community Manager:</p>
<ul>
  <li>To use it as a login domain: See <a href="#configure_domain_casiteminder">To set up a CA SiteMinder login domain in Community Manager</a> below.</li>
  <li>To use it as a Resource Owner Authentication Domain when defining an OAuth Provider: see <a href="#to_configure_domain_oauth_provider">To configure an OAuth Provider domain</a>.</li>
</ul>
<p>Once setup is complete, when users sign in they will see the CA SiteMinder icon on the platform login page and will be able to choose CA SiteMinder for login.</p>
<h5><a name="configure_domain_casiteminder"></a>To set up a CA SiteMinder login domain in Community Manager:</h5>
<ol>
  <li>Define the CA SiteMinder domain in the <em>Configure &gt; Security &gt; Identity Systems </em>section of Policy Manager. See notes above.</li>
  <li>In the platform, log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Navigate to the <em>Administration &gt; Config &gt; Logins</em> page. The <em>Configure</em> screen displays and the CA SiteMinder domain you added in Policy Manager will show up in the listing.</li>
  <li>To enable the CA SiteMinder domain, click the <strong>Enable</strong> checkbox.</li>
  <li>If desired, configure additional domain settings: <a href="site_admin_config.htm#what_is_a_target_host">Target Host</a>, <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">Logo/Avatar</a>, and <a href="site_admin_config.htm#what_login_page_integration_modes_are_supported">Mode</a>. For more information, see <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a></li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_get_google_credentials_for_a_google_connector_domain"></a><h3>How do I get Google credentials for a Google Connector domain?</h3>
<p>Before setting up a Google Connector domain in the platform, you'll need to register the platform as an app on the Google developer site at <a href="https://console.developers.google.com/project" title="Google Developers Console" target="_blank">https://console.developers.google.com/project</a> and get the Google App ID and Shared Secret values for your instance of the platform.</p>
<p>Once you have your credentials, you can set up your Google Connector domain. See <a href="#configure_domain_google">To set up a Google Connector domain in Community Manager</a> below.</p>


<h5><a name="to_get_credentials_for_a_google_connector_domain"></a>To get credentials for a Google Connector domain:</h5>
<p>Note: the instructions below relate to the Google developer site, which might change over time. Even if the details change, the basic steps will remain the same.</p>
<ol>
  <li>Go to the Google Developers Console at <a href="https://console.developers.google.com/project" title="Google Developers Console" target="_blank">https://console.developers.google.com/project</a> and choose <strong>Create Project</strong>.</li>
  <li>Give your project a name and ID. For the ID, you can accept the suggested ID, click the Refresh icon to get a new suggestion, or choose your own ID. Click <strong>Create</strong>.</li>
  <li>The next step is to subscribe to the Google+ API. On the left, click <strong>APIs &amp; Auth</strong> and then click <strong>APIs</strong>. Find the Google+ API on the list, and click the button to enable it. This is the API your app will use to allow users to log in with Google on the platform. Make sure the status for the Google+ API shows as <strong>ON</strong>.</li>
  <li>Next, get the credentials for your app:
    <ol>
      <li> On the left, click <strong>APIs &amp; Auth</strong> and then click <strong>Credentials</strong>.</li>
      <li>In the <strong>OAuth</strong> section, click <strong>Create New Client ID</strong>.</li>
      <li>Make sure Application Type is <strong>Web Application</strong>. </li>
      <li>In the Authorized Redirect URI field, enter the applicable redirect URI. For a login domain, enter: &lt;protocol&gt;://&lt;hostname&gt;/api/login/ssoLogin. For example: https://www.example.com/api.ssoLogin. For other types of domain, refer to the table at <a href="#what_value_should_i_use_for_the_redirect_uri_for_my_google_connector_domain">What value should I use for Redirect URI for my Google Connector domain?</a> below. Google requires that the redirect URL is a public URL.</li>
    </ol>
  </li>
  <li>Save the values on the Google website and also have them available for the next step, setting up your Google Connector domain in Community Manager. See <a href="#configure_domain_google">To set up a Google Connector domain in Community Manager</a> below.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_a_google_connector_domain"></a>
<h3>How do I set up a Google Connector domain?</h3>
<p>The Google <a href="basics_glossary.htm#gl_connectordomain">Connector domain</a> allows users to log in to the platform using Google credentials, and can be used for other activities such as OAuth support. Essentially, the Site Admin registers the platform with Google as a Google app, and then uses the values provided by Google for Google AppID and Google App Shared Secret to set up the Google Connector domain.</p>
<p><strong>Note</strong>: Earlier versions of the platform used the OpenID Relying party domain for Google login. It's important to now use Google Connector, which relies on a newer technology recommended and supported by Google; the OpenID Relying party domain uses an older API which Google has scheduled for end of life.</p>
<p><strong>Note</strong>: For certain activities, such as creating an API or using the platform API, users must complete the standard platform signup process. Logging in with Google is not adequate for these activities.</p>
<h5><a name="configure_domain_google" id="configure_domain_google"></a>To set up a Google Connector domain in Community Manager:</h5>
<ol>
  <li>First, get your credentials from the Google Developers Console. See <a href="#to_get_credentials_for_a_google_connector_domain">To get credentials for a Google Connector domain</a> above.</li>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong>. The <strong>Select Domain Type</strong> drop-down menu displays.</li>
  <li>Select <strong>Google Connector</strong> and click <strong>Select</strong>. The <em>Add Connector Domain</em> wizard opens at the Details page.</li>
  <li>Specify values for Name and Description and then click <strong>Next</strong> to go to the App Details page of the wizard.</li>
  <li>For <strong>Google Client ID</strong> and <strong>Google Client Secret</strong>, provide the values that were assigned by Google when you registered your instance of the platform as a web application at <a href="https://console.developers.google.com/project" title="Google Developers Console" target="_blank">https://console.developers.google.com/project</a>.</li>
  <li>Click <strong>Next</strong> to go to the Realm Details page.</li>
  <li>Conditional: if you were using OpenID for Google login in an earlier version of the platform (OpenID Relying Party connector), and want to map values between the old and the new connectors, set up the following:
    <ul>
      <li>To map user accounts to your Google Connector domain, enter the Realm value for your OpenID connector. It must be a fully qualified URL, including protocol, and must match the value set up on the Client Details page for your OpenID Relying Party domain (see <a href="#configure_login_openid_relying_party">To configure an OpenID Relying Party domain</a> below).</li>
      <li><strong>Use email address of the user to map the user login sessions with existing user accounts using Google domain</strong>: If your Realm values do not match, but you still want to map user login sessions using your existing OpenID Connect domain, click the <strong>Yes</strong> button. *See note below.</li>
    </ul>
  </li>
  <li>If you are using the domain for login, you must enable it on the <strong>Administration</strong> &gt; <strong>Config</strong> &gt; <strong>Logins</strong> page. See below.</li>
</ol>
<p>*<strong>Use email address</strong> field: there is one side effect to using this option. Google allows users to create accounts using a non-Google email address, and to change the email address whenever they want. If a user creates an account on the portal using login with Google, and then changes the email address on Google, and the email mapping option is in place, the portal might interpret the new email address as a new user account. However, since we always give the preference to the OpenID identifier to map the user to the profile, using email mapping will work smoothly in most cases.</p>
<p><a href="#top">Back to top</a></p>



<a name="domains_login_setup_google"></a>
<h3>How do I set up the platform to log in with Google (Google Connector domain)?</h3>
<p>If you want to allow your users to log in to the platform using Google credentials, follow these three steps:</p>
<ol>
  <li>Register your platform as an app on the Google Developers Console and get credentials. See <a href="#how_do_i_get_google_credentials_for_a_google_connector_domain">How do I get Google credentials for a Google Connector domain?</a></li>
  <li>Set up a Google Connector domain on the platform. See <a href="#how_do_i_set_up_a_google_connector_domain">How do I set up a Google Connector domain?</a></li>
  <li>Enable the Google platform login. See below.</li>
</ol>
<p>Once setup is complete, when users sign in they will see the Google icon on the platform login page and can log in using Google credentials.</p>


<h5><a name="enable_domain_google"></a>To enable and configure a Google login domain in Community Manager:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Create the Google Connector domain, following the instructions above.</li>
  <li>Click <strong>Administration</strong> &gt; <strong>Config</strong> &gt; <strong>Logins</strong>.</li>
  <li>Check the <strong>Enable</strong> checkbox.</li>
  <li>If you would like to configure a virtual host for the domain, enter it in the &quot;Target Host&quot; text box. For more information, see <a href="site_admin_config.htm#what_is_a_target_host">What is a Target Host?</a> below.</li>
  <li>In the Logo/Avatar column, click <strong>Upload</strong> and select the logo you would like to display for the Login button. for more information, see <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">How do I upload and crop icons?</a>  You can upload your own custom button or refer to the following page for information on Google login button usage: <a href="https://developers.google.com/+/branding-guidelines#sign-in-button" target="_blank">Google+ Sign-In button branding guidelines</a>.</li>
  <li>In the Mode column, click the applicable button to indicate whether you want the Google login to be a popup or to display in the main window. For more information, see <a href="site_admin_config.htm#what_login_page_integration_modes_are_supported">What login page integration modes are supported?</a></li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="what_value_should_i_use_for_the_redirect_uri_for_my_google_connector_domain"></a>
<h3>What value should I use for the Redirect URI for my Google Connector domain?</h3>
<p>Depending on how you will be using the Google Connector domain, there are three possible redirect URI values that you could use on the Google site when registering your platform as an app on <a href="https://console.developers.google.com/project" title="Google Developers Console" target="_blank">the Google Developers Console</a>. Choose the applicable value from the table below.</p>
<p><strong>Note</strong>: Google requires that the redirect URL be a public URL. The Google Connector domain can only work if the portal is on a public URL.</p>
<table cellspacing="0px" class="doctable" style="width: 90%;">
<thead>
  <tr>
    <th width="50%">Environment Scenario</th>
    <th width="50%">Redirect URL</th>
  </tr>
</thead>
<tbody>
  <tr class="t2row">
    <td>Community Manager Login</td>
    <td>&lt;CMConsoleAddress&gt;/api/login/ssoLogin</td>
  </tr>
  <tr class="t1row">
    <td><p>OAuth Provider Resource Owner domain when OAuth Provider is deployed in CM container</p></td>
    <td>&lt;OAuthProviderAuthorizationServer&gt;/oauth/auz/grants/provider/authcomplete</td>
  </tr>
  <tr class="t2row">
    <td>OAuth Provider Resource Owner domain when OAuth Provider is deployed in ND container (OAuth Provider Agent scenario)</td>
    <td>&lt;NetworkDirectorHostAddress&gt;/oauth/auz/grants/provider/authcomplete</td>
  </tr>
</tbody>
</table>

<p>For information on setting up your platform as an app in the Google Developers Console, refer to <a href="site_admin_domains.htm#domains_login_setup_google">How do I set up the platform to log in with Google (Google Connector domain)?</a> above.</p>
<p>If you will be using your Google Connector domain for OAuth, you will also need to customize the user consent screen. See <a href="#how_do_i_customize_google_user_consent_screen">How do I customize the Google user consent screen for my Google Connector domain?</a></p>
<p><a href="#top">Back to top</a></p>



<a name="domain_setup_openid_relying_party"></a><h3>How do I set up the platform to log in with an OpenID Relying Party domain? (legacy)</h3>
<p> The platform provides support for logging into the platform using Google using an <strong>OpenID Relying Party </strong> domain. However, Google is deprecating the OpenID 2.0 API, which supports this domain, and recommends migration to the Google+ API. Registration is already closed to new OpenID 2.0 clients, and support will end on April 20, 2015. For more information, see the Google information article at <a href="https://developers.google.com/+/api/auth-migration#timetable" target="_blank">https://developers.google.com/+/api/auth-migration#timetable</a>.</p>
<p>The documentation below is included in case platform users with existing OpenID 2.0 credentials might need to use it. However, it is best to switch as soon as possible to the Google Connector domain (see <a href="#how_do_i_set_up_a_google_connector_domain">How do I set up a Google Connector domain?</a>). </p>


<a name="configure_login_openid_relying_party"></a>
<h5>To configure an OpenID Relying Party domain:</h5>
<ol>
  <li>Log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong>. The <strong>Select Domain Type</strong> drop-down menu displays.</li>
  <li>Select <strong>OpenID Relying Party</strong> and click <strong>Select</strong>. The Add Open ID Relying Party wizard opens at the <em>Details</em> page.</li>
  <li>Enter the OpenID client <strong>Name</strong> and <strong>Description</strong> (for example, Name=Google, Description=Google Login Resource) and click <strong>Next</strong>. The <em>Provider Details</em> page displays.</li>
  <li>Enter the Discovery URL for the OpenID provider. This represents the location of the Relying Party's OpenID endpoints. For example, the Discovery URL for Google OpenID support is: https://www.google.com/accounts/o8/id. For more information, see <a href="api_admin_openid_support.htm#what_is_a_discovery_url">What is a Discovery URL?</a> (API Admin section).</li>
  <li>Click <strong>Next</strong> to go to the <em>Client Details</em> page.</li>
  <li>Enter the Realm URL. For more information, see <a href="api_admin_openid_support.htm#what_is_a_realm">What is a Realm?</a> (API Admin section).</li>
  <li>Click <strong>Save</strong>.</li>
  <li>If you want the domain to be available for users logging in, you must enable it. See below.</li>
</ol>
<h5>To enable an OpenID Relying Party domain for login:</h5>
<ol>
  <li>Go to the <em>Administration &gt; Config &gt; Logins</em> page. The <em>Configure</em> screen displays and the OpenID Relying Party domain you just added will display in the listing.</li>
  <li>To enable the domain, click the checkbox in the &quot;Enable&quot; column.</li>
  <li>If you would like configure a virtual host for the domain, enter it in the &quot;Target Host&quot; text box. See <a href="site_admin_config.htm#what_is_a_target_host">What is a Target Host?</a> for more information.</li>
  <li>In the Logo/Avatar column, click <strong>Upload</strong> and select the logo you would like to display for the Login button. See <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">How do I upload and crop icons?</a> for more information.</li>
  <li>In the Mode column, click the radio button of the identity store integration method (Popup or Main) you would like to use for the current domain. See <a href="site_admin_config.htm#what_login_page_integration_modes_are_supported">What login page integration modes are supported?</a> for more information.</li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a> </p>



<hr />



<h3><a name="h_api_authentication_domains">API Authentication Domains</h3>



<a name="how_does_the_authentication_provider_configuration_process_work"></a><h3>How does the authentication provider configuration process work?</h3>
<p>The platform provides the following add-on features that provide authentication support for APIs:</p>
<ul>
  <li>SOA Software Community Manager OAuth Provider (see <a href="#how_do_i_set_up_and_configure_an_oauth_provider_domain">How do I set up and configure an OAuth Provider domain?</a>)</li>
  <li>SOA Software Community Manager OpenID Provider (see <a href="#how_do_i_configure_an_openid_relying_party_domain">How do I configure an OpenID Relying Party domain?</a>)</li>
</ul>
<p>Here's how authentication provider type configuration process works:</p>
<ul>
  <li>The Site Administrator installs the applicable feature into the platform container via the <em>SOA Software Administration Console</em>. This process is covered in the installation guide for the platform.</li>
  <li>After the features are installed, the authentication provider options are available to the Site Admin in the user interface by choosing <strong>Administration</strong> &gt; <strong>Domains</strong>.</li>
  <li>The Site Admin can then choose the domain type that best suits the authentication protocol required for APIs that are part of the platform deployment, and complete configuration if needed.</li>
  <li>The authentication domain is then available to the API Admin when configuring the API. For example, if an API uses OAuth 2.0, the API Admin can go into the OAuth configuration for the API (API Details page, <strong>OAuth Details</strong> button), choose the OAuth Provider domain and OAuth version, select grant types, and specify resources relative to the specified OAuth version. The API Admin could choose different OAuth providers for different APIs if multiple providers are defined.</li>
</ul>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_a_platform_deployment_to_support_a_third_party_provider"></a><h3>How do I set up a platform deployment to support a third-party provider?</h3>
<p>The <strong>OAuth Details</strong> function on the <em>API &gt; Details</em> page includes a pre-defined &quot;third-party provider&quot; domain that allows the API Admin to configure grants and resource mapping for OAuth versions 1.0a and 2.0. No setup is required by the Site Admin for this option.</p>
<p>For more information, see <a href="api_admin_oauth_support.htm#how_do_i_configure_my_api_with_an_oauth_provider">How do I configure my API with an OAuth Provider?</a> in the API Admin help.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_and_configure_an_oauth_provider_domain"></a><h3>How do I set up and configure an OAuth Provider domain?</h3>
<p>The <strong>SOA Software Community Manager OAuth Provider</strong> feature is an SOA Software Community Manager add-on. This domain type allows you to select a Resource Owner Authentication Domain, and configure grant types, access tokens, grant properties, and branding.</p>
<p>Essentially, there are two steps:</p>
<ol>
  <li>Install the <strong>OAuth Provider</strong> feature via the <em>SOA Software Administration Console</em>. This  installs the OAuth Provider domain, which the Site Admin can then access in the Community Manager user interface.</li>
  <li>Setting up the domain in Community Manager by choosing <strong>Administration &gt; Domains &gt; Add Domain</strong>.</li>
</ol>
<p>Once the domain is configured, it is available to API Admins on the <em>Edit OAuth Details</em> page on the <em>API Details</em> page.</p>
<p>If API owners will be using a third-party provider, configuring an OAuth Provider domain is not needed.</p>
<p><strong>Note</strong>: When you install the OAuth Provider domain, it is added to the list of choices in <strong>Administration &gt; Domains &gt; Add Domain</strong>. It is not available as a Login option in the <strong>Administration&nbsp;&gt; Config</strong>&nbsp;&gt; <strong>Logins</strong> page.</p>


<h5><a name="to_configure_domain_oauth_provider"></a>To configure an OAuth Provider domain:</h5>
<ol>
  <li>Click the <em>Administration</em> quick filter (wrench icon). The <em>Site Administration</em> page displays.</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong> and choose <strong>OAuth Provider</strong>. The Add OAuth Provider wizard opens at the Details page.<br />
    </li>
  <li>Enter a name and description for your OAuth provider (for example, Name=OAuth 2-Legged, Description=OAuth 2-Legged Domain).</li>
  <li>Click <strong>Next</strong> to go to the <strong>Grant Types</strong> page. Here you will specify information about one or more <a href="basics_glossary.htm#gl_oauth_granttypes">OAuth Grant Types</a> applicable to the OAuth domain. Specify values or choose options for the following, as needed:
    <ul>
      <li><strong>Grant Validity Period (days)</strong>: specify the number of days an authorization grant will be valid for. This value applies to all grant types you choose.</li>
      <li><strong>Grant types</strong>: choose one or more grant types, and then set values as specified in the steps below.</li>
    </ul>
    </li>
  <li>If you choose <a href="basics_glossary.htm#gl_oauth_grant_authorizationcode">3-legged, Authorization Code</a>: specify timeout values for the <a href="basics_glossary.htm#gl_oauth_authorizationcode">authorization code</a> and <a href="basics_glossary.htm#gl_accesstoken">access token</a>, and choose whether or not to issue <a href="basics_glossary.htm#gl_refreshtoken">refresh tokens</a>.</li>

    <li>If you choose <a href="basics_glossary.htm#gl_oauth_grant_implicit">3-legged, Implicit</a>: specify an <a href="basics_glossary.htm#gl_oauth_accesstoken">access token</a> timeout value.</li>
  <li>If you choose <a href="basics_glossary.htm#gl_oauth_grant_clientcredentials">2-legged, Client Credentials</a>: specify an <a href="basics_glossary.htm#gl_oauth_accesstoken">access token</a> timeout value.</li>
  <li>If you choose <a href="basics_glossary.htm#gl_oauth_grant_passwordcredentials">2-legged, Resource Owner Credentials</a>: specify an access token timeout value and choose whether or not to issue <a href="basics_glossary.htm#gl_refreshtoken">refresh tokens</a>.</li>
  <li>In the Domain field, choose from the drop-down list. If the domain you want isn't on the list, it must be installed and configured (see notes above). Some possible choices:
    <ul>
      <li>Google: choose this for authentication with Google.</li>
      <li>Facebook</li>
      <li>LDAP Automation</li>
      <li>Google Automation: this is present for backwards compatibility only. Choose Google.</li>
    </ul>
  </li>
  <li>Click <strong>Next</strong> to go to the <strong>Scopes</strong> page. Here you will define OAuth scopes; later, API Admins for APIs that are using this OAuth domain can map specific operations in the API to these scopes and thus control the functions that OAuth will be requesting access to. For example, you might define a scope called Read-Only and map all GET operations to it. For more information, see <a href="api_admin_oauth_support.htm#how_does_scope_mapping_work">How does Scope Mapping work?</a> Define one or more scopes, with the following values for each:
    <ul>
  <li><strong>Name</strong>, <strong>short description</strong>, and <strong>full description</strong>.</li>
  <li><strong>Default scope</strong> checkbox: indicates whether this scope is always requested.</li>
  <li><strong>User Authorization Required</strong>: indicates whether user authorization is required for scope access. Usually, it is. However, if an OAuth grant includes all scopes with this option disabled, the provider does not require the resource owner to authorize the grant request.</li>
</ul>
  </li>
  <li>Click <strong>Next</strong> to go to the <strong>Properties</strong> page. If you want to set up grant properties, click <strong>+Add</strong> to add one or more grant properties. For more information, see <a href="api_admin_oauth_support.htm#what_is_a_grant_property">What is a Grant Property?</a> For each property, specify the following values:
    <ul>
      <li><strong>Property Label</strong>: a text description, used only within the platform.</li>
      <li><strong>Property ID</strong>: the object ID that references the property file stored on the OAuth Provider's site.</li>
  </ul>
  </li>
  <li>Click <strong>Next</strong> to go to the <strong>Branding</strong> page. Here you can customize the page that app users will see when an API that is using this OAuth domain is requesting access to the user's resources. For more information, see <a href="api_admin_oauth_support.htm#how_does_resource_owner_authentication_page_login_branding_work">How does Resource Owner Authentication Page Login Branding work?</a> Specify values as needed:
    <ul>
      <li><strong>Logo</strong>: optionally, you can upload a logo to display on the login page. It should be 50px high. For more information, see <a href="basics_account_management.htm#how_do_i_upload_and_crop_icons">How do I upload and crop icons?</a></li>
      <li><strong>Footer Text</strong>: custom text for the footer of the login page.</li>
      <li><strong><a href="basics_glossary.htm#gl_oauth_authorizationserverurl">Authorization Server URL</a></strong>: a required value, this is the public URL that apps will use to access this OAuth provider. For more information, including the specific paths for different OAuth URLs for the OAuth provider, see <a href="#what_is_the_authorization_server_url_for_the_platform">What is the OAuth Authorization Server URL for the platform?</a></li>
    </ul>
  </li>
  <li>Click <strong>Save</strong>. The OAuth Provider domain is saved, and is now available for selection by API Admins when setting up OAuth details (<strong>API Details page</strong> &gt; <strong>OAuth Details</strong>).</li>
</ol>
<p><strong>Note</strong>: If your implementation will have a load balancer in front of the OAuth Provider container, there is an additional setup step for the Site Admin. As well as setting up the OAuth domain, the load balancer settings on your implementation must be set to the below two headers on the outbound request from the load balancer to the SOA platform containers:</p>
<ul>
  <li><strong>X-Forwarded-Host</strong>: the hostname used to access the load balancer. You could also keep the Host header as is rather than setting this header.</li>
  <li><strong>X-Forwarded-Proto</strong>: the protocol used to access the load balancer; HTTPS if the <a href="basics_glossary.htm#gl_vip">VIP</a> (virtual address for the load balancer) is an HTTPS address, HTTP if the VIP is an HTTP address. You can skip this step if the protocol used from the load balancer to the SOA container is the same as the protocol used from the client to the load balancer.</li>
</ul>
<p>If needed, get help from the Policy Manager Site Admin to make sure these settings are correct.</p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_an_authorization_server_url"></a><h3>What is an Authorization Server URL?</h3>
<p>As part of setting up the OAuth domain, the Site Admin must specify the <a href="basics_glossary.htm#gl_oauth_authorizationserverurl">Authorization Server URL</a>. This is the URL for the server designated by the OAuth provider to perform the authorization steps to a) authenticate the resource owner, and b) get the resource owner's permission for the app to access the resources. The app directs the resource owner (user) to the authorization server URL; when the authorization steps are complete, the authorization server returns the user to the app, using the redirect URL provided by the app.</p>
<p>It is the URL at which the OAuth Provider accesses the requests, for both <a href="basics_glossary.htm#gl_oauth_authorizationendpoint">Authorization Endpoint</a> and <a href="basics_glossary.htm#gl_oauth_tokenendpoint">Token Endpoint</a>.</p>
<p><strong>Note</strong>: One deployment can support more than one OAuth Provider. If there is more than one, it is important that each OAuth Provider has a different Authorization Server URL, for both <a href="basics_glossary.htm#gl_oauth_authorizationendpoint">Authorization Endpoint</a> and <a href="basics_glossary.htm#gl_oauth_tokenendpoint">Token Endpoint</a>.</p>
<p>When setting up the OAuth domain, once you have specified the Authorization Server URL it is important to make sure that requests are directed to this URL where either OAuth Provider or OAuth Provider Agent features are installed. This might include additional actions; for example, adding a DNS entry or configuring the load balancer if the URL is a virtual endpoint on F5.</p>
<p>The URL you provide for the Authorization Server is the base of the URL for the Request Token URL, Access Token URL, and Authorize URL, with additional parts of the paths as shown below. The <a href="basics_glossary.htm">Callback URL</a> is the Redirect URL that an app developer would provide in the App details page.</p>
<p>For specific authorization server URLs for the platform, see <a href="#what_is_the_authorization_server_url_for_the_platform">What is the OAuth Authorization Server URL for the platform?</a> below.</p>
<p><a href="#top">Back to top</a></p>



<a name="what_is_the_authorization_server_url_for_the_platform"></a><h3>What is the OAuth Authorization Server URL for the platform?</h3>
<p>The URL you provide for the Authorization Server is the base of the URL for the Request Token URL, Access Token URL, and Authorize URL, with additional parts of the paths as shown below. </p>
<p>The URLs for both supported OAuth versions are shown below.</p>
<p>OAuth 1.0a:</p>
<ul>
  <li><strong>OAuth Authorization Endpoint URL</strong>: {oauth.provider.url}/oauth/auz/authorize</li>
  <li><strong>OAuth Token Endpoint Request Token URL</strong>: {oauth.provider.url}/oauth/oauth10/initiate</li>
  <li><strong>OAuth Token Endpoint Access Token URL</strong>: {oauth.provider.url}/oauth/oauth10/token</li>
</ul>
<p>OAuth 2.0:</p>
<ul>
  <li><strong>OAuth Authorization Endpoint URL</strong>: {oauth.provider.url}/oauth/auz/authorize</li>
  <li><strong>OAuth Token Endpoint URL</strong>: {oauth.provider.url}/oauth/oauth20/token</li>
</ul>
<p><strong>Note</strong>: App developers need to know the Authorization Server URL in order to set up their apps to use the OAuth domain. This information must be made available to API Admins, who must make sure it is included in API documentation. </p>
<p>For general information on authorization server URLs, see <a href="#what_is_an_authorization_server_url">What is an Authorization Server URL?</a> above.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_set_up_an_my_deployment_to_support_openid"></a><h3>How do I set up my deployment to support OpenID?</h3>
<p>If you are a Site or API Administrator you can set up OAuth Provider definitions in the <em>Site Administration &gt; Domains</em> section. You create a domain for each OpenID Provider scenario and these configurations are then available for selection using the <strong>API OAuth</strong> function in the APIs that are part of your deployment.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_configure_an_openid_relying_party_domain"></a><h3>How do I configure an OpenID Relying Party domain?</h3>
<p>This <strong>SOA Software Community Manager OpenID Provider</strong> feature is an SOA Software Community Manager add-on for the OpenID Provider. The feature is installed via the <em>SOA Software Administration Console</em>.</p>
<p>Installation of this feature adds the OpenID Relying Party domain option to your platform deployment. You can then add and configure the domain in the <strong>Site Administration &gt; Domains </strong>section of the Community Manager user interface. </p>
<p>Using the <strong>Add Domain</strong> function, the Site Admin can select the <strong>OpenID Relying Party </strong> domain type to configure the domain.</p>
<p>If it will be used for logging in, the Site Admin must then enable the domain as a login option in the <em>Administration &gt; Config &gt; Logins</em> page. The Site Admin can also select it as a Resource Owner Authentication Domain when defining an OAuth Provider (<strong>Administration</strong> &gt; <strong>Domains</strong> &gt; <strong>Add Domain</strong> &gt; <strong>OAuth Provider</strong>).</p>
<p>Once configured, it is also available for selection when setting up the OAuth details for any API that is part of your deployment.</p>
<h5>Documentation:</h5>
<p>See the <em>Site Admin &gt; Domains </em>and <em>Site Admin &gt; Config</em> sections of the platform online help for more information.</p>
<p>For information about setting up an API to use OpenID, see <a href="api_admin_openid_support.htm">Open ID Support</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_configure_access_permissions_for_openid"></a><h3>How do I configure access permissions for OpenID?</h3>
<p>Access permissions for OpenID are established by configuring a domain that represents the login resource. For OpenID, you use the <strong>OpenID Relying Party</strong> domain. This domain is installed as part of the <strong>SOA Software Community Manager OpenID Provider</strong> feature in the SOA Software Administration Console and is available via <strong>Add Domain</strong> feature via <em>Site Administration &gt; Domains.</em></p>
<p>After you configure the OpenID login resource, entries will show in the platform as follows:</p>
<ul>
  <li>In the <em>Site Administration &gt; Domain</em>s section, the defined domain will be selectable from the <em>Resource Owner Authentication Domain</em> drop-down when you configure an OAuth Provider domain.</li>
  <li>In the <em>Site Administration &gt; Config &gt; Users</em> section the defined domain will be available on the <em>List of Users</em> page and can be enabled as a login option.</li>
</ul>
<a name="configure_openid_login_resource"></a><h5>To configure an OpenID login resource:</h5>
<ol>
  <li>Click the <em>Administration</em> quick filter (wrench icon). The <em>Site Administration</em> page displays.</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong>. The <strong>Select Domain Type</strong> drop-down menu displays.</li>
  <li>Select <strong>OpenID Relying Party</strong> and click <strong>Select</strong>. The <em>Details</em> page displays.</li>
  <li>In the <em>OpenID Client</em> section, enter the &quot;Name&quot; and &quot;Description&quot; of the login resource (for example, Name=Google, Description=Google Login Resource). <br />
    <br />
    <em>Note that the &quot;Name&quot; field cannot be edited after the domain configuration is saved, so it's important to be as descriptive as possible with your domain name. For example, including the name of the OpenID Provider as an identifier is recommended along with other details that reveal something about the configuration.</em></li>
  <li>Click <strong>Next</strong> to continue. The <em>Provider Details</em> page displays. Enter the OpenID &quot;Discovery URL&quot; that represents the location of the Relying Party's OpenID endpoints. See <a href="api_admin_openid_support.htm#what_is_a_discovery_url">What is a Discovery URL?</a> for more information.</li>
  <li>Click <strong>Next</strong> to continue. The <em>Client Details</em> page displays. Enter the &quot;Realm&quot; and &quot;Return URL.&quot; See <a href="api_admin_openid_support.htm#what_is_a_realm">What is a Realm?</a> for more information.</li>
  <li>To save the domain configuration, click <strong>Save</strong>. The OpenID login resource domain is saved, displays on the <em>Domains Summary</em> page, and is now available for selection as a resource when you define an OAuth Provider domain.</li>
  <li>When the domain is set up, you must enable it. See <a href="site_admin_config.htm#how_do_i_enable_and_customize_a_login_domain">How do I enable and customize a platform login domain?</a> (Configuration section).</li>
</ol>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_configure_a_pingfederate_domain"></a><h3>How do I configure a PingFederate domain?</h3>
<p>The PingFederate&reg; <a href="basics_glossary.htm#gl_connectordomain">Connector domain</a> allows you to use <a href="basics_glossary.htm#gl_pingfederate">PingFederate</a> as an OAuth provider. Essentially, the Site Admin registers the platform with PingFederate as the resource server, and then uses the values provided by PingFederate to set up the PingFederate Provider domain in Community Manager.</p>
<p>Note: For a walkthrough of the end-to-end sequence of steps, including API and app setup, refer to <a href="site_admin_ov_pf_endtoend.htm">PingFederate Usage Scenario: End to End</a>.</p>
<p>To get everything configured correctly, you must perform some setup steps in PingFederate and Policy Manager before going ahead with the Community Manager setup. Follow the procedures given in the sections listed below, in sequence:</p>
<ol>
  <li><a href="#pf_config_1_pf">PingFederate Configuration</a></li>
  <li><a href="#pf_config_2_pm">Policy Manager Configuration</a></li>
  <li><a href="#pf_config_3_cm">Community Manager Configuration</a></li>
</ol>


<h4><a name="pf_config_1_pf"></a>1: PingFederate Configuration</h4>
<p>You must have a working PingFederate installation.</p>
<p>In your PingFederate server configuration, do the following:</p>
<ul>
  <li>In Server Configuration &gt; System Settings &gt; Server Settings, in the Federation Info section, make sure the base URL value is defined and is accessible from Community Manager.
  <p><strong>Note</strong>: you will use this value in Community Manager later on, in the PingFederate domain setup, on the <strong>Provider Details</strong> page.</p></li>
  <li>Validate and export the server certificate: In Server Configuration &gt; Security &gt; SSL Server Certificates, make sure there is a valid, activated certificate defined. The PingFederate server certificate must have a &quot;Common Name&quot; matching the hostname in the base URL. If necessary, create a new certificate. When you know the certificate is valid, click the Export link to export the certificate.</li>
  </ul>
<p>In PingFederate, create a client (application) to represent Community Manager. You must set up the client as a resource server in your PingFederate instance so that Community Manager can communicate with PingFederate. Follow the instructions below.</p>
<h5>To create the Community Manager client in PingFederate</h5>
<ol>
  <li>In PingFederate, click OAuth Settings &gt; Client Management, and choose <strong>Add Client</strong>.</li>
  <li>For <strong>Client Authentication</strong>, choose <strong>Client Secret</strong>.</li>
  <li>Configure the client with the following settings:
    <ul>
      <li>Client ID: enter a unique ID for your Community Manager client. This is the equivalent of a login. For example, <strong>PingFederate</strong>.</li>
      <li>Client Secret: click Generate Secret and copy the secret so that you can set up the same value in Community Manager in a later step.</li>
    </ul>
  </li>
  <li>Choose a name.</li>
  <li>Under <strong>Allowed Grant Types</strong>, choose <strong>Access Token Validation (Client is a Resource Server)</strong>.</li>
  <li>Save your settings.</li>
</ol>
<p>In PingFederate, set up the password credential validator. This validates the credentials provided through the OAuth user interface when a token is requested. See below.</p>

<h5>To set up password credential validation in PingFederate</h5>
<ol>
  <li>In PingFederate, in the settings for your Community Manager client, click Authentication &gt; Password Credential Validators.</li>
  <li>Choose <strong>Create New Instance</strong>.</li>
  <li>Specify Instance Name, Instance ID, and Type, and save the values.</li>
  </ol>
<p>That completes the initial PingFederate setup. The next step is to make sure Policy Manager configuration steps are in place.</p>

<h4><a name="pf_config_2_pm"></a>2: Policy Manager Configuration (HTTPS only)</h4>
<p>In Policy Manager, if your PingFederate implementation is expecting HTTPS connections, you must set up the PingFederate server certificate in two places.</p>
<p><strong>Note</strong>: It's important to do this <strong>before</strong> setting up the domain in Community Manager.</p>
<h5>To set up the PingFederate server certificate in Policy Manager</h5>
<ol>
  <li>Add the issuer of the PingFederate server certificate in the platform trust store.   In Policy Manager: Console &gt; Configure &gt; Security &gt; Certificates &gt; Trusted CA Certificates tab. This step is needed so that Community Manager will trust the PingFederate authorization server endpoints. Note that when you upload the certificate, it generally takes a couple of minutes to take effect. Allow some time after uploading the certificates before setting up the domain in Community Manager.</li>
  <li>In the Community Manager container, add the PingFedereate server certificate in the <span class="apidoc_code">Jre/lib/security/cacerts</span> folder.</li>
  <li>Restart the container so that the above change goes into effect.</li>
</ol>
<h4><a name="pf_config_3_cm"></a>3: Community Manager Configuration</h4>
<p>When the PingFederate setup steps and Policy Manager setup steps are done, it's time to set up the PingFederate domain in Community Manager.</p>
<h5><a name="configure_domain_google" id="configure_domain_pingfederate"></a>To set up a PingFederate Provider domain in Community Manager:</h5>
<ol>
  <li>In Community Manager, log in as the Site Admin and click the <em>Site Administration</em> quick filter (wrench icon).</li>
  <li>Click <strong>Domains</strong>. The <em>Domains Summary</em> page displays.</li>
  <li>Click <strong>Add Domain</strong>. The <strong>Select Domain Type</strong> drop-down menu displays.</li>
  <li>Select <strong>PingFederate Provider</strong> and then click <strong>Select</strong>. The <em>Add Connector Domain</em> wizard opens.</li>
  <li><strong>Details</strong> page: Specify values for Name and Description and then click <strong>Next</strong>.</li>
  <li><strong>Provider Details</strong> page: Enter the base URL from the PingFederate server setup's Federation Info system settings; for example, https://&lt;hostname&gt;:&lt;port&gt;/&lt;basepath&gt;. The base URL is used to construct the OpenID Connect Well-Known Configuration URL to read the PingFederate OAuth 2.0 provider configuration. If PingFederate is expecting HTTPS connections, make sure you've added the issuer of the PingFederate server certificate in the platform trust store. Click <strong>Next</strong>.</li>
  <li><strong>Provider Details</strong> page: Enter the following values:
    <ul>
      <li><strong>Client ID</strong>: The unique identifier that you specified when you created the OAuth client for this platform within PingFederate.</li>
      <li><strong>Client Secret</strong>: The Client Secret value from the OAuth client setup in PingFederate.</li>
      <li><strong>Subject Attribute Name</strong>: the attribute from the OAuth access token that should be used as the subject; for example, username. At runtime, the attribute's value is used as the Subject field for API resources with policies that validate access tokens.</li>
      </ul>
  </li>
  <li>Click <strong>Save</strong>.</li>
</ol>
<p>The above steps complete the setup of the PingFederate domain. Once these steps are complete, authorized platform users can create APIs that use the PingFederate domain, and business admins or app developers can create apps that subscribe to those APIs.</p>
<p><strong>Note</strong>: For each app that is using an API that uses PingFederate as an OAuth provider, the PingFederate Admin must set up the app as a PingFederate client so that the app can be authenticated. For an overview of the entire process, end to end, see <a href="site_admin_ov_pf_endtoend.htm">PingFederate Usage Scenario: End to End</a>.</p>
<p><a href="#top">Back to top</a></p>



<a name="how_do_i_customize_google_user_consent_screen"></a>
<h3>How do I customize the Google user consent screen for my Google Connector domain?</h3>
<p>If you want to use a Google Connector domain to support OAuth 2.0 authentication on the platform, you will need to provide values for customization of the user consent screen that's presented to users when your app is asking for approval to access the user's data.</p>
<p>If you haven't already done so, register your app on the Google Developers Console. For instructions, see <a href="#to_get_credentials_for_a_google_connector_domain">To get credentials for a Google Connector domain</a>. Then follow the instructions below to customize the user consent screen.</p>
<h5><a name="to_customize_the_google_consent_page"></a>To customize the Google user consent screen:</h5>
<ol>
  <li>Log in to the Google Developers Console and go to the page where you registered your platform as an app.</li>
  <li>On the left, click <strong>APIs &amp; Auth</strong> and then click <strong>APIs</strong>. Make sure the status for the Google+ API shows as <strong>ON</strong>.</li>
  <li>On the left, click <strong>APIs &amp; Auth</strong> &gt; <strong>Consent Screen</strong>.</li>
  <li>Provide values you want your users to see, such as product name, homepage URL, and logo, and click <strong>Save</strong>.</li>
</ol>
<p><a href="#top">Back to top</a></p>


