<!-- left nav script -->
<script>
	function leftnav()
    {
        var pages = unsorted_pages_prod_cat.filter(function(a) {
            return (a.no_nav == '');
        }).sort(function CustomSort(a, b) {
            if ( ! a["weight"] ) { a["weight"] = 1000 ;}
            if ( ! b["weight"] ) { b["weight"] = 1000 ;}
            var weighta = a['weight'];
            var weightb = b['weight'];
            if(weighta != weightb){
                return (weighta - weightb);
            }
            else{
                return (a.navtitle.localeCompare(b.navtitle));
            }
        });
        var ObjUl = $('<ul></ul>').hide();
        ObjUl.addClass("soa-ui-dc-container-main-left-nav soa-ui-dc-container-main-left-nav-inner");

        for (i = 0; i < pages.length; i++)
        {
            var Objli = $('<li></li>');
            var Obja = $('<a></a>');
            var Objp = $('<p></p>');

            Objli.attr("role", "menuitem");

            if ( pages[i].url == '{{ page.url }}' ) {
            	Obja.addClass("soa-ui-dc-container-main-left-nav-item-selected soa-ui-dc-container-main-left-nav-item-link");
        	} else {
        		Obja.addClass("soa-ui-dc-container-main-left-nav-item-link");
        	}

        	if ( "{{ site.baseurl }}" ) {
            	Obja.attr("href", "{{ site.baseurl }}".concat(pages[i].url) );
            } else {
            	Obja.attr("href", pages[i].url );
            }
            if ( pages[i].type == 'pdf' ) {
                Obja.attr("target", "_blank");
            }
            if (pages[i].navtitle) {
                Obja.html(pages[i].navtitle.replace("&nbsp;", " "));
            } else {
                Obja.html(pages[i].title.replace("&nbsp;", " "));
            }

            Objli.addClass("soa-ui-dc-container-main-left-nav-item");
            Objli.append(Obja);

            ObjUl.append(Objli);
        }
        $('.soa-ui-dc-container-main-left').append(ObjUl);
    }
    $(document).ready(function() {
        leftnav();
        $(".soa-ui-dc-container-main-left").find("ul").show();
    });
</script>
<!-- End left nav script -->